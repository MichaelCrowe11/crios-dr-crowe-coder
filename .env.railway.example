# Railway Environment Variables Template
# Copy this file and configure for each Railway service

# ============================================
# PostgreSQL Service Variables
# ============================================
# Set these in Railway's PostgreSQL plugin or custom PostgreSQL service
POSTGRES_USER=crios
POSTGRES_PASSWORD=<generate-strong-password>
POSTGRES_DB=crios_discovery

# Railway provides this automatically for PostgreSQL plugin:
# DATABASE_URL=postgresql://${{POSTGRES_USER}}:${{POSTGRES_PASSWORD}}@${{RAILWAY_TCP_PROXY_DOMAIN}}:${{RAILWAY_TCP_PROXY_PORT}}/${{POSTGRES_DB}}


# ============================================
# Redis Service Variables
# ============================================
# Set these in Railway's Redis plugin or custom Redis service
REDIS_PASSWORD=<generate-strong-password>

# Railway provides this automatically for Redis plugin:
# REDIS_URL=redis://default:${{REDIS_PASSWORD}}@${{RAILWAY_TCP_PROXY_DOMAIN}}:${{RAILWAY_TCP_PROXY_PORT}}


# ============================================
# Backend Service Variables
# ============================================
# These should be set in the Backend service environment

# Database connection (from PostgreSQL service)
DATABASE_URL=${{Postgres.DATABASE_URL}}

# Redis connection (from Redis service)
REDIS_URL=${{Redis.REDIS_URL}}

# Anthropic API Key for AI features
ANTHROPIC_API_KEY=<your-anthropic-api-key>

# Application settings
ENV=production
PYTHONPATH=/app
PORT=8000

# Optional: Celery settings
CELERY_BROKER_URL=${{Redis.REDIS_URL}}
CELERY_RESULT_BACKEND=${{Redis.REDIS_URL}}

# Security
SECRET_KEY=<generate-random-secret-key>
ALLOWED_HOSTS=*
CORS_ORIGINS=https://${{Frontend.RAILWAY_PUBLIC_DOMAIN}}


# ============================================
# Frontend Service Variables
# ============================================
# These should be set in the Frontend service environment

# API endpoint (from Backend service)
NEXT_PUBLIC_API_URL=https://${{Backend.RAILWAY_PUBLIC_DOMAIN}}
NEXT_PUBLIC_WS_URL=wss://${{Backend.RAILWAY_PUBLIC_DOMAIN}}

# Next.js settings
NODE_ENV=production
PORT=3000


# ============================================
# Celery Worker Service Variables
# ============================================
# These should be set in the Celery Worker service environment

# Database and Redis (from other services)
DATABASE_URL=${{Postgres.DATABASE_URL}}
REDIS_URL=${{Redis.REDIS_URL}}

# Anthropic API Key
ANTHROPIC_API_KEY=<your-anthropic-api-key>

# Celery settings
CELERY_BROKER_URL=${{Redis.REDIS_URL}}
CELERY_RESULT_BACKEND=${{Redis.REDIS_URL}}
C_FORCE_ROOT=true
PYTHONPATH=/app


# ============================================
# Notes for Railway Setup
# ============================================
# 1. Create services in this order:
#    - PostgreSQL (use Railway plugin)
#    - Redis (use Railway plugin)
#    - Backend (use platform/backend/Dockerfile)
#    - Celery Worker (use platform/backend/Dockerfile with custom CMD)
#    - Frontend (use platform/frontend/Dockerfile)
#
# 2. Railway's service reference syntax:
#    ${{ServiceName.VARIABLE_NAME}}
#    Example: ${{Postgres.DATABASE_URL}}
#
# 3. Railway automatically sets:
#    - RAILWAY_ENVIRONMENT
#    - RAILWAY_PUBLIC_DOMAIN (for services with public URL)
#    - RAILWAY_PRIVATE_DOMAIN (for internal communication)
#    - PORT (dynamically assigned)
#
# 4. Generate secure passwords:
#    openssl rand -base64 32
#
# 5. Health check endpoints:
#    Backend: GET /health
#    Frontend: GET /api/health (if implemented)
